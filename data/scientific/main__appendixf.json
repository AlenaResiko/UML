{
  "authors": [
    "Iddo Drori",
    "Gaston Longhitano",
    "Mao Mao",
    "Seunghwan Hyun",
    "Yuke Zhang",
    "Sungjun Park",
    "Zachary Meeks",
    "Xin-Yu Zhang",
    "Ben Segev",
    "Howard Yong",
    "Nakul Verma",
    "Avi Shporer",
    "Alon Amit",
    "Madeleine Udell"
  ],
  "date_published": "2025-02-14",
  "raw_tex": "\\section{Combinatorics Game Representations}\n\\label{appendix:F}\n\n\\paragraph{Problem setup as a game.}\nGiven a problem \\(\\mathcal{P}\\) in English, we interpret it as a Markov game, that may be partially observable:\n$G_{\\mathcal{P}} \\;\\; \\bigl(\\mathcal{S},\\, \\Omega,\\,\\mathcal{O},\\, \\mathcal{A},\\, T,\\, R\\bigr),$\nwhere $\\mathcal{S}$ is the set of hidden states describing the true status of the problem,\n$\\Omega$ is the set of observations (partial information) that might be available to an agent,\n$\\mathcal{O}:\\mathcal{S}\\to\\Omega$ is an observation function describing how states map to (possibly partial) observations,\n$\\mathcal{A}$ is the set of actions in the game,\n$T:\\mathcal{S}\\times \\mathcal{A}\\to \\Delta(\\mathcal{S})$ a transition function, giving a distribution over next states given the current state and action, and $R:\\mathcal{S}\\times \\mathcal{A}\\to \\mathbb{R}$ a reward function capturing the objective to be optimized (e.g., correctness of a solution, or tightness of a bound.\n\n\n\n\\subsection*{2024 IMO}\n\\label{appendix:F_2024_IMO}\n\n\\begin{table}[htb]\n\\caption{2024 IMO combinatorics problem 3: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\n   Space   & Description \\\\\n   \\midrule\n   State   & Sequence \\( S   (a_1, a_2, \\ldots, a_n) \\), where \\( n \\leq N \\) initially, then extended beyond \\( N \\): \\\\\n   & \u2022 For \\( n \\leq N \\), \\( a_n \\) are chosen by the agent \\\\\n   & \u2022 For \\( n > N \\), \\( a_n   \\text{count}(a_{n-1}, S[1 : n - 1]) \\) \\\\\n   & \u2022 Counts \\( C_k \\): number of times integer \\( k \\) appears in \\( S[1 : n] \\) \\\\\n   Action   & For each \\( n \\leq N \\), select \\( a_n \\in \\mathbb{N}^+ \\) (positive integers) \\\\\n   Reward   & After extending the sequence sufficiently: \\\\\n   & \u2022 If at least one of \\( a_1, a_3, a_5, \\ldots \\) or \\( a_2, a_4, a_6, \\ldots \\) is eventually periodic: Reward \\(   +1 \\) \\\\\n   & \u2022 If both sequences are non-periodic up to maximum length: Reward \\(   -1 \\) \\\\\n   Terminal & Episode ends when either: \\\\\n   & \u2022 Periodicity is detected in \\( a_{\\text{odd}} \\) or \\( a_{\\text{even}} \\) sequences \\\\\n   & \u2022 Maximum sequence length is reached \\\\\n   \\bottomrule\n\\end{tabular} \n\\end{table}\n\n\\begin{table}[htb]\n\\caption{2024 IMO combinatorics problem 5: State space, action space, and rewards.}\n   \\centering\n   \\small\n   \\begin{tabular}{cl}\n   \\toprule\n   Space   & Description \\\\\n   \\midrule\n   State   & Grid \\( S \\in \\{0,1\\}^{n \\times (n-1)} \\), where $n2024$,\\\\\n   & \u2022 \\( S_{i,j}   1 \\) if cell \\( (i,j) \\) is visited \\\\\n   & \u2022 \\( S_{i,j}   0 \\) if cell \\( (i,j) \\) is unexplored \\\\\n   & \u2022 Known monster locations are marked as blocked \\\\\n   Action   & Four possible moves from the current position \\( (i,j) \\): \\\\\n   & \u2022 Up: \\( (i-1,j) \\) if \\( i > 1 \\) \\\\\n   & \u2022 Down: \\( (i+1,j) \\) if \\( i < 2024 \\) \\\\\n   & \u2022 Left: \\( (i,j-1) \\) if \\( j > 1 \\) \\\\\n   & \u2022 Right: \\( (i,j+1) \\) if \\( j < 2023 \\) \\\\\n   Reward   & Each move: \\( -0.01 \\) step penalty \\\\\n   & Monster collision: \\( -1 \\), and the episode ends \\\\\n   & Reaching the last row rewards: \\\\\n   & \u2022 First, second, third attempts: $+30$,$+20$,$+10$\\\\\n   Terminal & Episode ends when either: \\\\\n   States   & \u2022 Agent reaches any cell in row 2024 (success) \\\\\n   & \u2022 Agent hits a monster (failure) \\\\\n   \\bottomrule\n   \n   \\end{tabular}   \n\\end{table}\n\n\\newpage\n\\clearpage\n\n\\subsection*{2024 USAMO}\n\\label{appendix:F_2024_USAMO}\n\n\\begin{table}[htb]\n\\caption{2024 USAMO combinatorics problem 2: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\n   Space   & Description \\\\\n   \\midrule\n   State   & Current assignment of elements to the sets \\( S_1, S_2, \\ldots, S_{100} \\): \\\\\n   & \u2022 \\( S_{i,j}   1 \\) if element \\( e_i \\) is in set \\( S_j \\), \\( 0 \\) otherwise \\\\\n   & \u2022 The intersection of all sets is not empty: \\\\\n   &   \u2013 There exists at least one element \\( e_i \\) present in all sets \\\\\n   Action   & Assign or remove an element \\( e_i \\) to selected sets \\( S_j \\): \\\\\n   & \u2022 Decide for each element which sets it belongs to \\\\\n   Reward   & For each action: \\\\\n   & \u2022 Penalty \\( -1 \\) if constraints are violated \\\\\n   & \u2022 Reward \\( +1 \\) for satisfying constraints \\\\\n   & \u2022 Additional reward \\( +10 \\) for minimizing the number of elements in at least 50 sets \\\\\n   Terminal & Episode ends when: \\\\\n   States   & \u2022 All elements have been assigned and constraints are satisfied (success) \\\\\n   & \u2022 Constraints cannot be satisfied (failure) \\\\\n   \\bottomrule\n\\end{tabular}\n\\end{table}\n\n\n\\begin{table}[htb]\n\\caption{2024 USAMO combinatorics problem 4: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\n   Space   & Description \\\\\n   \\midrule\n   State   & Configuration of the necklace with \\( m n \\) beads: \\\\\n   & \u2022 Each bead \\( b_i \\) is colored red (R) or blue (B) \\\\\n   & \u2022 The necklace is circular; beads are arranged in positions \\( 1 \\) to \\( m n \\) \\\\\n   Action   & Change the color of a bead: \\\\\n   & \u2022 Select bead \\( b_i \\) and flip its color (R to B or B to R) \\\\\n   Reward   & For each action: \\\\\n   & \u2022 Step penalty \\( -0.1 \\) per action \\\\\n   & \u2022 If condition is satisfied: \\\\\n   &   \u2013 Reward \\( +100 \\) \\\\\n   & \u2022 If condition is not satisfied after maximum steps: \\\\\n   &   \u2013 Penalty \\( -100 \\) \\\\\n   & \u2022 Condition: \\\\\n   &   \u2013 No matter how the necklace is cut into \\( m \\) blocks of \\( n \\) consecutive beads, \\\\\n   &   each block has a distinct number of red beads \\\\\n   Terminal & Episode ends when: \\\\\n   States   & \u2022 The condition is satisfied (success) \\\\\n   & \u2022 Maximum number of steps is reached (failure) \\\\\n   \\bottomrule\n\\end{tabular}\n\\end{table}\n\n\\newpage\n\\clearpage\n\n\n\n\n\n\n\n\n\\subsection*{2023 IMO Shortlist}\n\\label{appendix:F_2023_IMO_Shortlist}\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 1: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace   & Description \\\\\n\\midrule\nState   & Grid $S \\in \\{0,1\\}^{m \\times n}$, where $m,n > 1$ \\\\\n   & \u2022 $S_{i,j}   0$ if the coin at position $(i,j)$ shows tail-side up \\\\\n   & \u2022 $S_{i,j}   1$ if the coin at position $(i,j)$ shows head-side up \\\\\nAction   & Select a $2 \\times 2$ square starting at $(i,j)$, where \\\\\n   & $1 \\leq i \\leq m-1$, $1 \\leq j \\leq n-1$, and perform: \\\\\n   & \u2022 Flip coins at positions $(i,j)$ (top-left) and $(i+1,j+1)$ (bottom-right) \\\\\n   & \u2022 Flip the coin at either $(i,j+1)$ (top-right) or $(i+1,j)$ (bottom-left) \\\\\nReward   & Each move incurs a cost of $-1$ \\\\\n   & Reaching the state where all coins show head-side up gives a reward of $+1000$ \\\\\nTerminal & Episode ends when all coins show head-side up (success) \\\\\nStates   & \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 2: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace   & Description \\\\\n\\midrule\nState   & Current sequence $a_1, a_2, \\ldots, a_k$, where $k \\leq L$ \\\\\n   & \u2022 Each $a_i \\in \\{1, 2, \\ldots, 2^{2023}\\}$ \\\\\nAction   & Choose the next integer $a_{k+1}$ such that $1 \\leq a_{k+1} \\leq 2^{2023}$ \\\\\nReward   & $+1$ for each valid addition that maintains the condition: \\\\\n   & \u2022 No consecutive subsequence $a_i, \\ldots, a_j$ and signs $s_i, \\ldots, s_j \\in \\{1,-1\\}$ \\\\\n   &   satisfying $s_i a_i + \\ldots + s_j a_j   0$ \\\\\n   & Episode ends with zero reward if condition is violated \\\\\nTerminal & Episode ends when either: \\\\\nStates   & \u2022 The sequence violates the condition (failure) \\\\\n   & \u2022 The maximal length $L$ is reached (success) \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 3: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace   & Description \\\\\n\\midrule\nState   & Triangle grid with $n$ rows \\\\\n   & \u2022 Each circle is either red or not \\\\\n   & \u2022 Current position in the path (row $i$, position $j$) \\\\\nAction   & Move to one of the two circles directly below: \\\\\n   & \u2022 Left child at $(i+1, j)$ \\\\\n   & \u2022 Right child at $(i+1, j+1)$ \\\\\nReward   & For each move: \\\\\n   & \u2022 If the circle is red, reward $+1$ \\\\\n   & \u2022 Otherwise, reward $0$ \\\\\nTerminal & Episode ends when the path reaches the bottom row \\\\\nStates   & Goal is to maximize the total reward (number of red circles in the path) \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 4: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace   & Description \\\\\n\\midrule\nState   & Arrangement of pieces created from cuts \\\\\n   & \u2022 Positions of pieces in the $n \\times n$ grid \\\\\nAction   & Decide where to make cuts in the strip (between positions $1$ to $n^2 -1$) \\\\\n   & Place each piece into the grid, without rotations or flips \\\\\nReward   & Each cut incurs a penalty of $-1$ \\\\\n   & Assembling the grid satisfying $a_{ij} - (i+j-1) \\equiv 0 \\mod n$ rewards $+1000$ \\\\\nTerminal & Episode ends when the grid is correctly assembled satisfying the property \\\\\nStates   & Goal is to minimize the number of cuts (pieces) \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n\n\n\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 5: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace   & Description \\\\\n\\midrule\nState   & For each chest $i$ ($1 \\leq i \\leq 2023$): \\\\\n   & \u2022 Number of gems $g_i$ \\\\\n   & \u2022 Status: locked or unlocked \\\\\nAction   & Elisa selects an unlocked chest to add a gem \\\\\n   & Fairy then locks an unlocked chest (if more than one) or unlocks all chests (if only one) \\\\\nReward   & Negative reward proportional to the maximum gem difference: \\\\\n   & \u2022 $R   - (\\max_{i,j} |g_i - g_j|)$ \\\\\nTerminal & Process continues indefinitely; focus is on maintaining $\\max_{i,j} |g_i - g_j| \\leq C$ \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n\n\n\n\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 6: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace   & Description \\\\\n\\midrule\nState   & Current partitioning of the $N \\times N$ grid into paths \\\\\nAction   & Assign cells to paths following right-down or right-up rules \\\\\nReward   & Penalty of $-1$ for each new path created \\\\\n   & Reward for successfully partitioning all cells with minimal number of paths \\\\\nTerminal & Episode ends when all cells are assigned to paths \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n\n\n\n\n\\begin{table}[htb]\n\\caption{2023 IMO Shortlist combinatorics problem 7: State space, action space, and rewards.}\n   \\centering\n   \\small\n\\begin{tabular}{cl}\n   \\toprule\nSpace & Description \\\\\n\\midrule\nState   & A complete graph of \\( n \\) islands with edges labeled by one of \\( k \\) companies. \\\\\nAction   & Analyze the graph to determine the impact of removing any one company's edges. \\\\\nReward   & Correctly identifying the maximal \\( k \\) based on \\( n \\) earns a reward \\( +1 \\). \\\\\n   & Incorrect determination incurs a penalty \\( -1 \\). \\\\\nTerminal & Episode ends after determining the maximal possible \\( k \\). \\\\\n\\bottomrule\n\\end{tabular}\n\\end{table}\n\n",
  "title": "main"
}
